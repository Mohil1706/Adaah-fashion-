<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Checkout - Billing</title>
<link rel="stylesheet" href="style.css">
<style>
  
  .brand-text {
text-align: center;
font: 20px;
    

  }
.checkout-wrapper{ max-width:800px;padding:20px; }
.checkout-card{ background:#fff;padding:20px;border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.06); }
.row{ display:flex; gap:18px; flex-wrap:wrap; }
.col{ flex:1 1 240px; }
label{ display:block; margin:10px 0 6px; font-weight:600; }
input[type="text"], input[type="tel"], textarea{ width:100%; padding:10px; border:1px solid #ccc; border-radius:8px; }
button.place-order{ background:#262726; color:#fff; padding:12px 20px; border-radius:10px; border:none; cursor:pointer; margin-top:12px; width:100%; }
.note{ font-size:14px; color:#ee2e2e; margin-top:10px; }
</style>
</head>

<body>

<div class="checkout-wrapper">
  <div class="brand-bar" style="margin-bottom:14px; font: 20px;"><span class="brand-text"><b>Checkout (COD)</b></span></div>

  <div id="checkout" class="checkout-card">
    <!-- filled by JS -->
  </div>
</div>

<script>
const WHATSAPP_NUMBER = "918105240740"; // replace if needed
const PRODUCTS = {
  1: { id:1, name:"T-Shirt 1", price:599, img:"images/o1.jpg" },
  2: { id:2, name:"T-Shirt 2", price:499, img:"images/o2.jpg" },
  3: { id:3, name:"T-Shirt 3", price:699, img:"images/o3.jpg" },
  4: { id:4, name:"T-Shirt 4", price:399, img:"images/o4.jpg" },
  5: { id:5, name:"Hoodie 1", price:999, img:"images/o5.jpg" },
  6: { id:6, name:"Hoodie 2", price:899, img:"images/o6.jpg" },
  7: { id:7, name:"Casual Wear", price:799, img:"images/o7.jpg" },
  8: { id:8, name:"Denim Shirt", price:849, img:"images/o8.jpg" },
  9: { id:9, name:"Oversize Tee", price:549, img:"images/o9.jpg" },
 10: { id:10,name:"Printed Tee", price:499, img:"images/o10.jpg" }
};

function getId(){ return (new URLSearchParams(window.location.search)).get('id') || '1'; }

function renderCheckout(){
  const id = getId();
  const p = PRODUCTS[id];
  if(!p){ document.getElementById('checkout').innerHTML = '<p>Product not found.</p>'; return; }

  document.getElementById('checkout').innerHTML = `
    <div style="display:flex; gap:18px; align-items:center; flex-wrap:wrap;">
      <img src="${p.img}" alt="${p.name}" style=" border-radius:8px; margin-left:30px">
      <div>
        <h2 style="margin:0 0 6px;">${p.name}</h2>
        <div style="font-weight:700; font-size:18px;">₹${p.price}</div>
        <div style="margin-top:6px; color:#555;">Payment: <strong>Cash on Delivery (COD)</strong></div>
      </div>
    </div>

    <form id="billingForm" style="margin-top:18px;">
      <label for="custName">Full name</label>
      <input id="custName" name="custName" type="text" placeholder="Your name" required>

      <label for="custPhone">Mobile number</label>
      <input id="custPhone" name="custPhone" type="tel" placeholder="e.g. 9876543210" required>

      <label for="custAddress">Full delivery address</label>
      <textarea id="custAddress" name="custAddress" rows="3" placeholder="House, street, city, pincode" required></textarea>

      <label for="qty">Quantity</label>
      <select id="qty" name="qty" style="padding:8px;border-radius:6px; width:100%;">
        <option value="1">1</option><option value="2">2</option><option value="3">3</option>
      </select>

      <button type="submit" class="place-order">Place Order (COD)</button>

      <p class="note">After placing order, we will open WhatsApp &nbsp;&nbsp;&nbsp;&nbsp;for confirmation. Please complete the &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message to confirm the order.</p>
    </form>
  `;

  document.getElementById('billingForm').addEventListener('submit', function(ev){
    ev.preventDefault();
    const name = document.getElementById('custName').value.trim();
    const phone = document.getElementById('custPhone').value.trim();
    const address = document.getElementById('custAddress').value.trim();
    const qty = parseInt(document.getElementById('qty').value || '1');

    if(!name || !phone || !address){ alert('Please fill all fields'); return; }

    // Generate dynamic product link based on current folder
const currentPath = window.location.pathname;
const folderPath = currentPath.substring(0, currentPath.lastIndexOf('/') + 1);
const productLink = window.location.origin + folderPath + 'product-detail.html?id=' + p.id;
const productImageUrl = window.location.origin + '/' + p.img;

const order = {
  product: p,
  quantity: qty,
  customer: { name, phone, address },
  time: new Date().toISOString(),
  productLink,
  productImageUrl
};
    // Save to session so thankyou.html can show summary
    sessionStorage.setItem('lastOrder', JSON.stringify(order));

    // Prepare WhatsApp message
    let msg = `New Order from Website:%0A`;
    msg += `Product: ${p.name}%0A`;
    msg += `Price: ₹${p.price}%0A`;
    msg += `Quantity: ${qty}%0A`;
    msg += `Product Link: ${order.productLink}%0A%0A`;
    msg += `Customer Details:%0AName: ${name}%0AMobile: ${phone}%0AAddress: ${address}%0A%0A`;
    msg += `Payment Method: COD`;

    // open WhatsApp in new tab
    const waUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;
    window.open(waUrl, '_blank');

    // redirect to thank you page
    setTimeout(()=>{ window.location.href = 'thankyou.html'; }, 500);
  });
}

renderCheckout();
</script>
</body>
</html>









