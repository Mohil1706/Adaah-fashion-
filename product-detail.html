<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Details</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
    .customer-reviews {
    margin-top: 25px;
    padding: 30px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

    }
    .view-details-btn {
  background-color: #9e9898;
  color: #fff;
  border: none;
  padding: 8px 10px;
  border-radius: 28px;
  font-size: 14px;
  cursor: pointer;
  margin-top: auto;            /* pushes button to bottom when card grows */
  transition: transform .12s ease, background-color .18s ease;
}
body {
    font-family: Archivo, sans-serif;
    background: #f5f5f5;
    margin: 0;
}

/* Container */
.wrapper {
    max-width: 900px;
    margin: auto;
    background: #fff;
    padding: 30px;
}

/* Image Slider */
.slider {
    width: 100%;
    overflow: hidden;
    position: relative;
}

/* SHARE BUTTON */
.share-btn {
    position: absolute;
    top: 12px;
    right: 12px;
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 10px;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
    z-index: 99;
}

.slides {
    display: flex;
    width: 400%;
    transition: 0.4s;
}

.slides img {
    width: 25%;
    border-radius: 10px;
}

/* Slide Buttons */
.slide-btns {
    text-align: center;
    margin-top: 10px;
}

.slide-btns span {
    display: inline-block;
    width: 14px;
    height: 14px;
    background: #ccc;
    border-radius: 50%;
    margin: 5px;
    cursor: pointer;
}

.active-btn {
    background: #000;
}

/* Product Name */
h2 {
    margin: 10px 0 5px 0;
}

/* Rating */
.rating {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
}

.rating-star {
    color: gold;
    font-size: 20px;
}

.rating-text {
    margin-left: 10px;
    color: #666;
}

/* Price Section - single line */
.price-box {
    background: #fff;
    padding: 12px 15px;
    border-radius: 12px;
    box-shadow: 0 0 10px #0001;
    margin-top: 10px;
    display: flex;
    align-items: baseline;
    gap: 14px;
    flex-wrap: wrap;
}

.offer-price {
    font-size: 28px;
    font-weight: bold;
    color: #111;
}

.mrp {
    text-decoration: line-through;
    color: #9a9a9a;
    font-size: 16px;
}

.off {
    color: #16a34a;
    font-weight: 700;
    font-size: 16px;
}

.price-small {
    font-size: 14px;
    color: #777;
}

/* Description */
.desc {
    margin-top: 20px;
}

/* Size Selector */
.size-box {
    margin-top: 20px;
}

.size-box span {
    display: inline-block;
    padding: 14px 20px;
    background: #eee;
    margin: 5px;
    border-radius: 30px;
    cursor: pointer;
    font-weight: 600;
}

.size-box span.active {
    background: #000;
    color: white;
}

/* Quantity */
.qty-box {
    margin-top: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.qty-box button {
    padding: 8px 14px;
    font-size: 20px;
    border-radius: 6px;
    border: 1px solid #ddd;
    background: #fff;
    cursor: pointer;
}

.qty-box input {
    width: 60px;
    text-align: center;
    font-size: 18px;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ddd;
}

/* Buy Button */
.buy-btn {
    width: 100%;
    background: #000000;
    color: #fff;
    padding: 15px;
    border: none;
    margin-top: 20px;
    border-radius: 30px;
    cursor: pointer;
    font-size: 15px;
}

/* Services */
.services {
    display: flex;
    align-items: center;
    margin-top: 25px;
    gap: 12px;
}

.service-box {
    width: 30%;
    text-align: center;
    background: #fff;
    padding: 12px;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.service-box img {
    width: 55px;
}

/* Related Products */
.related {
    margin-top: 28px;
}

.related h3 {
    margin-bottom: 12px;
}

.related-items {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    padding-bottom: 8px;
}

.related-card {
    min-width: 150px;
    background: #fff;
    border-radius: 10px;
    padding: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.related-card img {
    width: 100%;
    border-radius: 8px;
}

@media (max-width: 720px) {
    .service-box { width: 100%; }
    .price-box { gap: 8px; }
    .related-items { gap: 10px; }
}
</style>

</head>
<body>

<div class="wrapper">

    <!-- IMAGE SLIDER -->
    <div class="slider">

        <!-- SHARE BUTTON -->
        <div class="share-btn" onclick="shareProduct()">ðŸ”—</div>


        <div class="slides" id="slideBox">
            <img src="images/o1.jpg" alt="slide1">
            <img src="images/o2.jpg" alt="slide2">
            <img src="images/o3.jpg" alt="slide3">
            <img src="images/o4.jpg" alt="slide4">
        </div>
    </div>

    <div class="slide-btns">
        <span onclick="moveSlide(0)" class="active-btn" id="b0"></span>
        <span onclick="moveSlide(1)" id="b1"></span>
        <span onclick="moveSlide(2)" id="b2"></span>
        <span onclick="moveSlide(3)" id="b3"></span>
    </div>

    <!-- Product Name -->
    <h2 id="pname">T-Shirt Name</h2>

    <!-- Rating -->
    <div class="rating">
        <span class="rating-star">â˜…â˜…â˜…â˜…â˜†</span>
        <span class="rating-text">4.3</span>
    </div>

    <!-- Price Section -->
    <div class="price-box">
        <div class="offer-price">â‚¹499</div>
        <div class="mrp price-small">â‚¹999</div>
        <div class="off">50% OFF</div>
        <div style=" color:#16a34a; font-weight:600;">Delivery within 7 days</div>
    </div>

    <!-- Description -->
    <div class="desc">
        <h3>Description</h3>
        <p>High-quality cotton T-Shirt with premium stitching and durable print...</p>
    </div>

    <!-- Select Size -->
    <div class="size-box">
        <h3>Select Size</h3>
        <span onclick="selectSize(this)">S</span>
        <span onclick="selectSize(this)">M</span>
        <span onclick="selectSize(this)">L</span>
        <span onclick="selectSize(this)">XL</span>
    </div>

    <!-- Quantity -->
    <div class="qty-box">
        <button onclick="dec()">-</button>
        <input type="text" id="qty" value="1">
        <button onclick="inc()">+</button>
    </div>

    <!-- Buy Button -->
    <button class="buy-btn" id="buyNowBtn" onclick="buyNow()">Buy Now</button>

<script>
    
</script>
    <button class="buy-btn" style="background:#999f9b; margin-top:10px;" onclick="addToCart()">Add To Cart  </button>
    

    <!-- Services -->
    <div class="services">
        <div class="service-box">
            <img src="images/cod.png" alt="delivery">
            <p>Cash On Delivery</p>
        </div>
        <div class="service-box">
            <img src="images/auth.jpg" alt="quality">
            <p>Best Quality</p>
        </div>
        <div class="service-box">
            <img src="images/fast.png" alt="support">
            <p>Fast Delevery</p>
        </div>
    </div>

    <!-- Related Products -->
    <div class="related">
        <h3>Related Products</h3>
        <div class="related-items" id="relatedItems"></div>
    </div>

</div>

<script>

   function addToCart() {
    const sizeEl = document.querySelector('.size-box span.active');
    const size = sizeEl ? sizeEl.textContent : 'M';
    const qty = parseInt(document.getElementById('qty').value || '1');

    const cartItem = {
        id: productId,
        name: product.name,
        price: product.price,
        img: product.images[0],
        size: size,
        qty: qty
    };

    // Get existing cart
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // If same product + size exists, increase quantity
    const existing = cart.find(item => item.id === product.id && item.size === size);
    if (existing) {
        existing.qty += qty;
    } else {
        cart.push(cartItem);
    }

    localStorage.setItem("cart", JSON.stringify(cart));

    window.location.href = "cart.html";
}


// Slider
function moveSlide(n) {
    document.getElementById("slideBox").style.marginLeft = `-${n * 100}%`;
    for (let i = 0; i < 4; i++) {
        document.getElementById("b" + i).classList.remove("active-btn");
    }
    document.getElementById("b" + n).classList.add("active-btn");
}

// Auto-play
let currentSlide = 0;
setInterval(()=> {
    currentSlide = (currentSlide + 1) % 4;
    moveSlide(currentSlide);
}, 4000);

// Size Selection
function selectSize(el) {
    document.querySelectorAll(".size-box span").forEach(s => s.classList.remove("active"));
    el.classList.add("active");
}

// Quantity
function inc() {
    let q = document.getElementById("qty");
    q.value = parseInt(q.value) + 1;
}

function dec() {
    let q = document.getElementById("qty");
    if (parseInt(q.value) > 1) q.value = parseInt(q.value) - 1;
}

// Buy Now
function buyNow() {
    const sizeEl = document.querySelector('.size-box span.active');
    const size = sizeEl ? sizeEl.textContent : 'M';
    const qty = parseInt(document.getElementById('qty').value || '1');
    const url = `payment.html?id=${productId}&size=${encodeURIComponent(size)}&qty=${qty}`;
    window.location.href = url;
}


// SHARE PRODUCT
function shareProduct() {
    const shareData = {
        title: document.getElementById("pname").textContent,
        text: "Check out this product!",
        url: window.location.href
    };

    if (navigator.share) {
        navigator.share(shareData);
    } else {
        navigator.clipboard.writeText(window.location.href);
        alert("Link copied to clipboard!");
    }
}

// Related products
const related = [
    { id:2, name:'Casual Shirt', price:399, img:'images/o2.jpg' },
    { id:3, name:'Summer Dress', price:499, img:'images/o2.jpg' },
    { id:4, name:'Denim Jeans', price:399, img:'images/o4.jpg' },
    { id:5, name:'Hoodie 1', price:999, img:'images/o1.jpg' },
    { id:6, name:'Hoodie 2', price:899, img:'images/o2.jpg' }
];

const relatedContainer = document.getElementById('relatedItems');
related.forEach(p => {
    const card = document.createElement('div');
    card.className = 'related-card';
    card.innerHTML = `
        <img src="${p.img}" alt="${p.name}">
        <p style="margin:8px 0 6px 0; font-weight:600;">${p.name}</p>
        <p style="color:#111;">â‚¹${p.price}</p>
    `;

    // FIXED CLICK ISSUE  
    card.addEventListener('click', () => {
        window.location.href = `product-detail.html?id=${p.id}`; 
    });

    relatedContainer.appendChild(card);
});

</script>




<!-- Customer Reviews Section -->
<div class="customer-reviews">
    <h3>Customer Reviews</h3>

    <!-- Existing Reviews -->
    <div id="reviewsList">
        <div class="review">
            <img src="images/user1.jpg" alt="Alice" class="user-img">
            <div class="review-content">
                <strong>Alice</strong>
                <div class="review-stars">â˜…â˜…â˜…â˜…â˜†</div>
                <p>Great quality T-shirt, very comfortable!</p>
            </div>
        </div>
        <div class="review">
            <img src="images/user1.jpg" alt="Bob" class="user-img">
            <div class="review-content">
                <strong>Bob</strong>
                <div class="review-stars">â˜…â˜…â˜…â˜…â˜†</div>
                <p>Nice fit and premium material.</p>
            </div>
        </div>
        <div class="review">
            <img src="images/user1.jpg" alt="Charlie" class="user-img">
            <div class="review-content">
                <strong>Charlie</strong>
                <div class="review-stars">â˜…â˜…â˜…â˜…â˜†</div>
                <p>Love the design! Highly recommend.</p>
            </div>
        </div>
        <div class="review">
            <img src="images/user2.jpg" alt="Diana" class="user-img">
            <div class="review-content">
                <strong>Diana</strong>
                <div class="review-stars">â˜…â˜…â˜…â˜…â˜†</div>
                <p>Good value for money.</p>
            </div>
        </div>
    </div>

    <!-- Submit Review -->
    <div class="submit-review">
        <h4>Write a Review</h4>
        <div id="userStars" style="font-size:24px; cursor:pointer; margin-bottom:5px;">
            <span data-value="1">â˜†</span>
            <span data-value="2">â˜†</span>
            <span data-value="3">â˜†</span>
            <span data-value="4">â˜†</span>
            <span data-value="5">â˜†</span>
        </div>
        <input type="text" id="userName" placeholder="Your Name" style="width:100%; margin-bottom:5px; padding:6px; border-radius:6px; border:1px solid #ddd;">
        <textarea id="userFeedback" placeholder="Write your review..." style="width:100%; padding:6px; border-radius:6px; border:1px solid #ddd; margin-bottom:5px;"></textarea>
        <button onclick="submitReview()" class="buy-btn" style="padding:10px 0;">Submit Review</button>
    </div>
</div>

<style>
.customer-reviews {
    margin-top: 25px;
    padding: 25px;
    background:#fff;
    border-radius:12px;
    box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.review {
    display:flex;
    align-items:flex-start;
    margin-bottom:12px;
}

.user-img {
    width:50px;
    height:50px;
    border-radius:50%;
    margin-right:10px;
}

.review-content strong {
    display:block;
}

.review-stars {
    color:gold;
    margin:2px 0;
}

.submit-review {
    margin-top:15px;
}

#userStars span:hover,
#userStars span.selected {
    color:gold;
}
</style>

<script>
let userRating = 0;
const starElements = document.querySelectorAll("#userStars span");

// Star hover and select
starElements.forEach(star => {
    star.addEventListener('mouseover', () => {
        highlightStars(parseInt(star.dataset.value));
    });
    star.addEventListener('mouseout', () => {
        highlightStars(userRating);
    });
    star.addEventListener('click', () => {
        userRating = parseInt(star.dataset.value);
        highlightStars(userRating);
    });
});

function highlightStars(rating) {
    starElements.forEach(star => {
        if(parseInt(star.dataset.value) <= rating){
            star.textContent = 'â˜…';
            star.classList.add('selected');
        } else {
            star.textContent = 'â˜†';
            star.classList.remove('selected');
        }
    });
}

// Submit Review
function submitReview() {
    const name = document.getElementById('userName').value.trim();
    const feedback = document.getElementById('userFeedback').value.trim();
    if(name === '' || feedback === '' || userRating === 0){
        alert("Please enter your name, feedback, and select a star rating!");
        return;
    }

    const newReview = document.createElement('div');
    newReview.className = 'review';
    newReview.innerHTML = `
        <img src="images/user-placeholder.png" alt="${name}" class="user-img">
        <div class="review-content">
            <strong>${name}</strong>
            <div class="review-stars">${'â˜…'.repeat(userRating)}${'â˜†'.repeat(5-userRating)}</div>
            <p>${feedback}</p>
        </div>
    `;

    document.getElementById('reviewsList').appendChild(newReview);

    // Reset inputs
    document.getElementById('userName').value = '';
    document.getElementById('userFeedback').value = '';
    userRating = 0;
    highlightStars(0);
}
// Get product ID from URL
const params = new URLSearchParams(window.location.search);
const productId = params.get('id');

// Example product database
const products = [
    { id: "1", name: "T-Shirt 1", price: 599, oldPrice: 699, discount: "15%", images: ["images/o1.jpg","images/o2.jpg"] },
    { id: "2", name: "T-Shirt 2", price: 499, oldPrice: 599, discount: "17%", images: ["images/o2.jpg","images/o3.jpg"] },
    { id: "3", name: "T-Shirt 3", price: 699, oldPrice: 799, discount: "13%", images: ["images/o3.jpg","images/o4.jpg"] },
    // add all products here...
];

// Find product by ID
const product = products.find(p => p.id === productId);

// Populate page dynamically
if(product){
    document.getElementById('pname').textContent = product.name;
    
    // Price section
    document.querySelector('.offer-price').textContent = "â‚¹" + product.price;
    document.querySelector('.mrp').textContent = "â‚¹" + product.oldPrice;
    document.querySelector('.off').textContent = product.discount;

    // Slider images
    const slideBox = document.getElementById("slideBox");
    slideBox.innerHTML = ""; // clear existing images
    product.images.forEach(src => {
        const img = document.createElement("img");
        img.src = src;
        slideBox.appendChild(img);
    });
} else {
    alert("Product not found!");
}




document.getElementById('buyNowBtn').addEventListener('click', buyNow);

// Improved addToCart that uses product data and localStorage
function addToCart() {
    if (!product) {
        alert('Product not loaded.');
        return;
    }

    const sizeEl = document.querySelector('.size-box span.active');
    const size = sizeEl ? sizeEl.textContent : 'M';
    const qty = Math.max(1, parseInt(document.getElementById('qty').value || '1', 10));

    // Read cart, update or push
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Find existing item with same product id and size
    const existing = cart.find(item => item.id === product.id && item.size === size);
    if (existing) {
        existing.qty = existing.qty + qty;
    } else {
        cart.push({
            id: product.id,
            name: product.name,
            price: product.price,
            img: product.images && product.images[0] ? product.images[0] : 'images/o1.jpg',
            size: size,
            qty: qty
        });
    }

    localStorage.setItem('cart', JSON.stringify(cart));

    // Redirect to cart page
    window.location.href = 'cart.html';
}

// Buy Now: save a checkout item and redirect to payment.html
function buyNow() {
    if (!product) {
        alert('Product not loaded.');
        return;
    }
    const sizeEl = document.querySelector('.size-box span.active');
    const size = sizeEl ? sizeEl.textContent : 'M';
    const qty = Math.max(1, parseInt(document.getElementById('qty').value || '1', 10));

    const checkoutItem = {
        id: product.id,
        name: product.name,
        price: product.price,
        img: product.images && product.images[0] ? product.images[0] : 'images/o1.jpg',
        size: size,
        qty: qty
    };

    // Save single item for checkout (payment.html will read it)
    localStorage.setItem('checkout', JSON.stringify(checkoutItem));
    window.location.href = 'payment.html';
}
</script>

</body>
</html>
