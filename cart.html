<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Cart</title>

<style>
body {
    font-family: Inter, Arial, sans-serif;
    padding: 12px;
    background: #f5f5f5;
    margin: 0;
}

h2 {
    margin-bottom: 16px;
    text-align: center;
    font-size: 22px;
}

.cart-item {
    display: flex;
    gap: 16px;
    background: #fff;
    padding: 16px;
    border-radius: 12px;
    margin-bottom: 16px;
    align-items: flex-start;
    flex-wrap: wrap;
}

.cart-item img {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 12px;
    cursor: pointer;
    flex-shrink: 0;
}

.item-info {
    flex: 1;
}

.item-info strong {
    font-size: 18px;
}

.qty {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 12px;
    flex-wrap: wrap;
}

.qty input {
    width: 70px;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ddd;
}

.btn {
    padding: 10px 14px;
    border-radius: 8px;
    cursor: pointer;
    border: none;
    font-size: 14px;
}

.remove {
    background: #ff6b6b;
    color: #fff;
}

/* Shop More Button */
.shop-more {
    display: block;
    width: 100%;
    margin-top: 20px;
    background: #111;
    color: #fff;
    padding: 16px;
    border-radius: 12px;
    border: none;
    text-align: center;
    font-size: 18px;
    cursor: pointer;
    text-decoration: none;
}

/* Cart Total */
#cartSummary {
    margin-top: 12px;
    font-weight: 700;
    font-size: 18px;
    text-align: center;
}

/* -------- Mobile Responsive -------- */
@media(max-width: 480px) {
    .cart-item {
        flex-direction: column;
        align-items: center;
        padding: 14px;
    }

    .cart-item img {
        width: 100%;
        max-width: 260px;
        height: auto;
    }

    .item-info strong {
        font-size: 20px;
        text-align: center;
    }

    .qty {
        justify-content: center;
    }

    .btn {
        flex: 1;
        font-size: 16px;
        padding: 10px 0;
    }

    .qty input {
        width: 80px;
        font-size: 16px;
    }

    .shop-more {
        font-size: 18px;
        padding: 16px 0;
    }

    #cartSummary {
        font-size: 20px;
    }
}

@media(max-width: 360px) {
    .cart-item {
        padding: 12px;
        gap: 10px;
    }

    .cart-item img {
        max-width: 220px;
    }

    .qty input {
        width: 70px;
        font-size: 14px;
    }

    .btn {
        font-size: 14px;
        padding: 8px 0;
    }

    #cartSummary {
        font-size: 18px;
    }
}

@media(max-width: 280px) {
    .cart-item img {
        max-width: 180px;
    }

    .btn, .shop-more {
        font-size: 12px;
        padding: 6px 0;
    }

    #cartSummary {
        font-size: 16px;
    }
}
</style>

</head>
<body>

<h2>Your Cart</h2>

<div id="cartContainer"></div>

<div id="cartSummary" style="margin-top:10px; font-weight:bold;"></div>

<!-- Shop More Button -->
<a href="index.html" class="shop-more">Shop More</a>

<script>
// ---- Render Cart ----
function renderCart() {
    const container = document.getElementById('cartContainer');
    container.innerHTML = '';
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');

    if (cart.length === 0) {
        container.innerHTML = '<p>Your cart is empty.</p>';
        document.getElementById('cartSummary').textContent = '';
        return;
    }

    let total = 0;

    cart.forEach((item, idx) => {
        const subTotal = (item.price || 0) * (item.qty || 1);
        total += subTotal;

        const itemEl = document.createElement('div');
        itemEl.className = 'cart-item';

        itemEl.innerHTML = `
            <img src="${item.img}" alt="${item.name}" data-id="${item.id}">
            
            <div class="item-info">
                <a href="product-detail.html?id=${encodeURIComponent(item.id)}"
                   style="text-decoration:none; color:black;">
                    <strong>${item.name}</strong>
                </a>

                <div>Size: ${item.size}</div>
                <div style="margin-top:6px;">Price: ₹${item.price} x ${item.qty} = ₹${subTotal}</div>

                <div class="qty" style="margin-top:8px;">
                    <button class="btn dec" data-idx="${idx}">-</button>
                    <input type="number" min="1" value="${item.qty}"
                           style="width:60px; padding:6px; border-radius:6px; border:1px solid #ddd;"
                           data-idx="${idx}" class="qty-input">
                    <button class="btn inc" data-idx="${idx}">+</button>

                    <button class="btn remove" data-idx="${idx}">Remove</button>
                </div>
            </div>
        `;

        container.appendChild(itemEl);
    });

    document.getElementById('cartSummary').textContent = `Total: ₹${total}`;

    attachCartEvents();
}

// ---- Events ----
function attachCartEvents() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Remove
    document.querySelectorAll('.remove').forEach(btn => {
        btn.addEventListener('click', e => {
            const idx = parseInt(e.currentTarget.dataset.idx);
            cart.splice(idx, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        });
    });

    // Increase
    document.querySelectorAll('.inc').forEach(btn => {
        btn.addEventListener('click', e => {
            const idx = parseInt(e.currentTarget.dataset.idx);
            cart[idx].qty += 1;
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        });
    });

    // Decrease
    document.querySelectorAll('.dec').forEach(btn => {
        btn.addEventListener('click', e => {
            const idx = parseInt(e.currentTarget.dataset.idx);
            cart[idx].qty = Math.max(1, cart[idx].qty - 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        });
    });

    // Manual input
    document.querySelectorAll('.qty-input').forEach(input => {
        input.addEventListener('change', e => {
            const idx = parseInt(e.currentTarget.dataset.idx);
            const val = Math.max(1, parseInt(e.currentTarget.value));
            cart[idx].qty = val;
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        });
    });

    // Click image → product detail
    document.querySelectorAll('.cart-item img').forEach(img => {
        img.addEventListener('click', () => {
            const id = img.dataset.id;
            window.location.href = `product-detail.html?id=${encodeURIComponent(id)}`;
        });
    });
}

renderCart();
</script>

</body>
</html>
